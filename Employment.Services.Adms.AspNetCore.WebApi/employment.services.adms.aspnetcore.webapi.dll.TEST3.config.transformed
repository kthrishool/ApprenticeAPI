<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
    <section name="employment.typeMapper" type="Employment.Services.Infrastructure.Core.Configuration.TypeMapperSection, Employment.Services.Infrastructure.Core"/>
    <section name="employment.authorizationConfiguration" type="Employment.Infrastructure.Security.Config.AuthorizationConfigurationSection, Employment.Infrastructure.Security"/>
    <section name="employment.webApiClient" type="Employment.Services.Infrastructure.WebApiClient.Configuration.WebApiClientSection, Employment.Services.Infrastructure.WebApiClient"/>
    <section name="employment.swagger" type="Employment.Services.Infrastructure.WebApi.Documentation.Configuration.SwaggerSection, Employment.Services.Infrastructure.WebApi"/>
    <section name="employment.webApi" type="Employment.Services.Infrastructure.WebApi.Configuration.WebApiSection, Employment.Services.Infrastructure.WebApi"/>
    <section name="employment.serviceRequestMessages" type="Employment.Services.Infrastructure.Service.Configuration.ServiceRequestMessagesSection, Employment.Services.Infrastructure.Service"/>
    <section name="employment.requestResponseLog" type="Employment.Services.Infrastructure.WebApi.Configuration.RequestResponseLogSection, Employment.Services.Infrastructure.WebApi"/>
    <sectionGroup name="serviceLogging">
      <section name="serviceLog" requirePermission="false" type="Employment.Services.Infrastructure.Logging.LoggingSectionHandler, Employment.Services.Infrastructure.Logging"/>
    </sectionGroup>
  </configSections>
  <employment.requestResponseLog enabled="true" logAlways="false"
  	logStatusCode="true" logMethod="true"
  	logElapsedTime="true" logRequestUri="true"
  	logRequestOnError="true" logResponseOnError="true"/>
  <employment.swagger tryItOutEnabled="false" host="webapi.edc.hosts.testnetwork"/>
  <serviceLogging>
    <serviceLog level="error" type="Employment.Services.Infrastructure.Logging.ApiSqlServiceLog, Employment.Services.Infrastructure.Logging" connectionStringName="EALogging" applicationName="Adms"/>
  </serviceLogging>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0"/>
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer"/>
    </providers>
  </entityFramework>
  <appSettings>
      <add key="IgnoreVersionHeader" value="true" />
	  <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true"/>
    <!-- Active Directory settings-->
    <add key="SupportedContracts" value="EPS5,WDC5,DESA,DESB,NEI5,HLS5,NPA,JAP,CWCA"/>
    <add key="Environment" value="TEST3"/>
    <add key="EssUserCacheDurationMinutes" value="15"/>
    <!-- minutes to keep the ess business objects for a user cached -->
    <add key="DirectoryOnlyProfiling" value="false"/>
    <!-- true = directory based only; false = mixed mode -->
    <add key="UserCaching" value="true"/>
    <!-- true = cache user objects; false = do not cahace user objects -->
  </appSettings>
  <connectionStrings>
    <add name="Db_ConnADW" connectionString="Data Source=ESGSQLT3;Initial Catalog=ADW;Integrated Security=SSPI"
      providerName="System.Data.SqlClient"/>
    <add name="EALogging" connectionString="Data Source=ESGSQLT3;Initial Catalog=EALogging;Integrated Security=SSPI"
      providerName="System.Data.SqlClient"/>
    <add name="Db_ESam" connectionString="Data Source=ESGSQLTS;Initial Catalog=ESAM;Integrated Security=True"
      providerName="System.Data.SqlClient"/>
    <add name="EmpDbContext"
      connectionString="Data Source=EMSQL01T3.dev.construction.enet;Initial Catalog=Emp;Integrated Security=SSPI;MultipleActiveResultSets=True;"
      providerName="System.Data.SqlClient"/>
    <add name="Igas" connectionString="Data Source=DRDSQLES47.datasources.devnetwork;Initial Catalog=iGasSearch;Integrated Security=SSPI"
      providerName="System.Data.SqlClient"/>
    <add name="IgasSpatial" connectionString="Data Source=DRDSQLES47.datasources.devnetwork;Initial Catalog=iGasSpatial;Integrated Security=SSPI"
      providerName="System.Data.SqlClient"/>
    <add name="InfrastructureStore"
      connectionString="Data Source=ESGSQLT3;Initial Catalog=InfrastructureStore;Integrated Security=True;enlist=false"
      providerName="System.Data.SqlClient"/>
    <add name="RequestResponse"
      connectionString="Data Source=ESGSQLT3;Initial Catalog=EALogging;Integrated Security=SSPI;Enlist=false"
      providerName="System.Data.SqlClient"/>
    <add name="RequestResponseRingBuffer"
      connectionString="Data Source=ESGSQLT3;Initial Catalog=EALoggingMO;Integrated Security=SSPI;Enlist=false"
      providerName="System.Data.SqlClient"/>
    
  </connectionStrings>
  <employment.typeMapper>
    <types>
      <add name="Authoriser" type="Employment.Infrastructure.Security.Authorisation.IAuthoriser, Employment.Infrastructure.Security"
        mapTo="Employment.Infrastructure.Security.Authorisation.PrincipalActivityAuthoriser, Employment.Infrastructure.Security"/>
      <add name="ServiceRequestRepository"
        type="Employment.Services.Infrastructure.Service.Interface.IServiceRequestMessageRepository`2, Employment.Services.Infrastructure.Service"
        mapTo="Employment.Services.Infrastructure.Service.Repository.ServiceRequestMessageRepository`2, Employment.Services.Infrastructure.Service"/>
      <add name="AdmsService" type="Employment.Services.Adms.ServiceInterface.IAdmsService, Employment.Services.Adms" mapTo="Employment.Services.Adms.Service.AdmsService, Employment.Services.Adms"/>
      <add name="AdmsRepository" type="Employment.Services.Adms.Repository.IAdmsRepository, Employment.Services.Adms" mapTo="Employment.Services.Adms.Repository.AdmsRepository, Employment.Services.Adms"/>
      <add name="EmploymentWebApiClient" type="Employment.Services.Infrastructure.Core.Interface.IEmploymentWebApiClient, Employment.Services.Infrastructure.Core" mapTo="Employment.Services.Infrastructure.WebApiClient.ApiClient.EmploymentWebApiClient, Employment.Services.Infrastructure.WebApiClient"/>
      <add name="Logger" type="Employment.Services.Infrastructure.Core.Interface.ILogger, Employment.Services.Infrastructure.Core"
        mapTo="Employment.Services.Infrastructure.Logging.XLogger, Employment.Services.Infrastructure.Logging"/>
      <add name="User" type="Employment.Services.Infrastructure.Core.Interface.IUser, Employment.Services.Infrastructure.Core"
        mapTo="Employment.Services.Infrastructure.Core.Identity.User, Employment.Services.Infrastructure.Core"/>
      <add name="FeatureToggle" type="Employment.Infrastructure.Feature.IFeatureToggle,  Employment.Infrastructure.Feature" mapTo="Employment.Infrastructure.Feature.FeatureToggleInternal, Employment.Infrastructure.Feature"/>
    </types>
  </employment.typeMapper>
  <employment.authorizationConfiguration>
    <apiAuthorization authorizationOnly="true"/>
  </employment.authorizationConfiguration>
  <employment.webApiClient allowSpecifiedDateTime="true" throwAggregateException="true" usePerRequestCache="false" usePerRequestCacheIfFeatureEnabled="true" useConnectionTimeout="false" useConnectionTimeoutIfFeatureEnabled="true" useConnectionClose="false" useConnectionCloseIfFeatureEnabled="true" denySpecifiedDateTimeForSystemToSystem="false" denySpecifiedDateTimeForSystemToSystemIfFeatureEnabled="true">
    <WebApiSecurity jwtEnabled="true">
    </WebApiSecurity>
    <WebApiResources>
      <WebApiResource name="Configuration" uri="" functionalArea="Authorisation">
        <Methods>
          <Method name="Get" uri="/CurrentConfiguration" />
        </Methods>
      </WebApiResource>
    </WebApiResources>
    <FunctionalAreas>
      <FunctionalArea name="Default" host="Test3" url="/Default/api" /><FunctionalArea name="DocumentStore" host="Test3" url="/DocumentStore/api"/><FunctionalArea name="JobSeeker" host="Test3" url="/JobSeeker/api"/><FunctionalArea name="ReferralManagement" host="Test3" url="/ReferralManagement/api"/><FunctionalArea name="Assessment" host="Test3" url="/Assessment/api"/><FunctionalArea name="Payment" host="Test3" url="/Payment/api"/><FunctionalArea name="Activity" host="Test3" url="/Activity/api"/><FunctionalArea name="Contract" host="Test3" url="/Contract/api"/>
    </FunctionalAreas>
    <Hosts>
      <Host name="Test3" url="http://webapi.edc.hosts.testnetwork/test3" />
    </Hosts>
  </employment.webApiClient>
  <employment.webApi>
    <unauthorizedException returnDetailedInformation="true"/>
    <internalServerError returnDetailedInformation="true"/>
    <userContext allowSpecifiedDateTime="true"
      denySpecifiedDateTimeForSystemToSystem="false"
      denySpecifiedDateTimeForSystemToSystemIfFeatureEnabled="false"/>
    <corsContext allowCors="false"/>
    <jwtSecurity enabled="true" federationMetadata="https://sts.dev.construction.enet/federationmetadata/2007-06/federationmetadata.xml">
      <audiences>
        <add audience="urn:api:activity:test3" />
<add audience="urn:api:administration:test3" />
<add audience="urn:api:agreement:test3" />
<add audience="urn:api:assessment:test3" />
<add audience="urn:api:authorisation:test3" />
<add audience="urn:api:casemanagement:test3" />
<add audience="urn:api:claim:test3" />
<add audience="urn:api:communication:test3" />
<add audience="urn:api:compliance:test3" />
<add audience="urn:api:contentmanagement:test3" />
<add audience="urn:api:contract:test3" />
<add audience="urn:api:diary:test3" />
<add audience="urn:api:documentstore:test3" />
<add audience="urn:api:documenttransactions:test3" />
<add audience="urn:api:employer:test3" />
<add audience="urn:api:ess:test3" />
<add audience="urn:api:fund:test3" />
<add audience="urn:api:jobsearch:test3" />
<add audience="urn:api:jobseeker:test3" />
<add audience="urn:api:programassurance:test3" />
<add audience="urn:api:referencedata:test3" />
<add audience="urn:api:referralmanagement:test3" />
<add audience="urn:api:reports:test3" />
<add audience="urn:api:webapi:acd:test3" />
<add audience="urn:api:xapi:test3" />
<add audience="urn:asp:hydrafwh:test3" />
<add audience="urn:asp:jobsearchfwh:test3" />
<add audience="urn:dll:background:test3" />
<add audience="urn:dll:cagen:test3" />
<add audience="urn:dll:mqprocess:test3" />
<add audience="urn:dll:servicebus:test3" />
<add audience="urn:mcia:mcia:test3" />
<add audience="urn:mvc:esrportal:test3" />
<add audience="urn:mvc:essweb:test3" />
<add audience="urn:mvc:esswebinternal:test3" />
<add audience="urn:mvc:esswebinternal:test" />
<add audience="urn:mvc:joacsecure:test3" />
<add audience="urn:mvc:jobsearch:test3" />
<add audience="urn:mvc:pat:test3" />
<add audience="urn:mvc:rjcp:test3" />
<add audience="urn:wcf:wcfinternal:test3" />
<add audience="urn:mvc:jobsearch:devx" />
<add audience="http://jobseekermobile.dev.idc.hosts.network/dev/rest/" />
<add audience="urn:asp:jobsearchfwh:devx"/>
<add audience="urn:mvc:ess:test3" />
<add audience="urn:asp:hydrafwh:dev" />
      </audiences>
      <delegatedIssuers>
        <add issuer="urn:iss:background:test3" thumbprint="A3AD0208C9578BCAF9749DEEBF07212239DE848A" />
<add issuer="urn:iss:cagen:test3" thumbprint="47E7804F254A3B1344968E1574C137E085E0D08A" />
<add issuer="urn:iss:fwh:test3" thumbprint="3C31D303F0AC7D2360E3198BF4DC2E74299DE6BC" />
<add issuer="urn:iss:joacsecure:test3" thumbprint="ECEDD0B2A11A1F3D44C2CC75B2A0D1003C7D3EDF" />
<add issuer="urn:iss:mcia:test3" thumbprint="4FFF6038A9C6277F2663339FA66F10F92717CB65" />
<add issuer="urn:iss:mqprocess:test3" thumbprint="750A6F12338381AFFCF299989F2D178B3DD9D226" />
<add issuer="urn:iss:rjcp:test3" thumbprint="2DFC504F235BC4457E3B465872C566C68C718EB2" />
<add issuer="urn:iss:servicebus:test3" thumbprint="599EFD2A3DFCD015CDA981AF76AD80AAE9E950E2" />
<add issuer="urn:iss:wcfinternal:test3" thumbprint="76E7BAD15EFCB8E6423AECC12D00E9775B3F3A7A" />
<add issuer="urn:iss:jobsearchfwh:devx" thumbprint="DD34C967BA3F656C0A23FC3E3345F9F8DF47792A" />
<add issuer="urn:iss:hydrafwh:dev" thumbprint="B2E79A15BA92489CD3F3DEAAA5EEF82C2D8B670A" />
      </delegatedIssuers>
    </jwtSecurity>
  </employment.webApi>
  <employment.serviceRequestMessages connectionStringName="Db_ConnADW"/>
</configuration>